<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù‚Ø§Ø±Ø¦ Ø´ÙŠÙ† Ø§Ù„Ø°ÙƒÙŠ</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cairo:wght@400&display=swap" rel="stylesheet">
    <style>
        :root { --bg-color: #f4f1ea; --text-color: #2c3e50; --font-size: 1.3rem; }
        body { margin: 0; padding: 0; background-color: var(--bg-color); color: var(--text-color); transition: 0.3s; font-family: 'Amiri', serif; line-height: 2; overflow-x: hidden; }
        
        .reader-tools { position: sticky; top: 0; background: rgba(255,255,255,0.95); backdrop-filter: blur(10px); display: flex; justify-content: space-around; padding: 12px; border-bottom: 1px solid #ddd; z-index: 1000; }
        .tool-btn { cursor: pointer; border: 1px solid #ccc; padding: 5px 12px; border-radius: 20px; font-family: 'Cairo'; font-size: 12px; background: white; }

        /* Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© (Ø§Ù„ØªÙ‚Ù„ÙŠØ¨ Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ) */
        #contentHolder {
            column-width: 100vw;
            column-gap: 40px;
            height: 80vh;
            padding: 20px 5vw;
            box-sizing: border-box;
            text-align: justify;
            transition: transform 0.5s ease-in-out;
        }

        .dark-mode { --bg-color: #121212; --text-color: #d1d1d1; }
        .sepia-mode { --bg-color: #f4f1ea; --text-color: #433422; }
    </style>
</head>
<body class="sepia-mode">

    <div class="reader-tools">
        <div class="tool-btn" onclick="toggleMode('dark')">ğŸŒ™ Ù„ÙŠÙ„ÙŠ</div>
        <div class="tool-btn" onclick="toggleMode('sepia')">ğŸ“œ ÙˆØ±Ù‚ÙŠ</div>
        <div class="tool-btn" onclick="changeSize(0.1)">A+</div>
        <div class="tool-btn" onclick="changeSize(-0.1)">A-</div>
    </div>

    <div id="contentHolder">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±ÙˆØ§ÙŠØ©...</div>
<script>
        async function loadNovel() {
            const urlParams = new URLSearchParams(window.location.search);
            const fileName = urlParams.get('book'); 
            const container = document.getElementById('contentHolder');
            
            if (!fileName) {
                container.innerText = "Ø®Ø·Ø£: Ù„Ù… ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø±ÙˆØ§ÙŠØ©.";
                return;
            }

            try {
                // Ø¨Ù†Ø­Ø§ÙˆÙ„ Ù†Ø¬ÙŠØ¨ Ø§Ù„Ù…Ù„Ù Ø¨Ù…Ù„Ø­Ù‚ .txt
                const response = await fetch(fileName + '.txt');
                if (!response.ok) throw new Error('File not found');
                const text = await response.text();
                
                // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù†Øµ ÙˆØ¹Ø±Ø¶Ù‡ Ø¨Ø´ÙƒÙ„ Ø¬Ù…ÙŠÙ„
                container.innerText = text;
                
                // ØªØ­Ø¯ÙŠØ« Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØµÙØ­Ø© Ø¨Ø§Ø³Ù… Ø§Ù„Ø±ÙˆØ§ÙŠØ©
                document.title = "Ù‚Ø±Ø§Ø¡Ø©: " + fileName;
            } catch (err) {
                container.innerHTML = `<div style="text-align:center; padding:50px;">
                    <h3>Ø¹Ø°Ø±Ø§Ù‹ØŒ ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±ÙˆØ§ÙŠØ©</h3>
                    <p>ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù…Ù„Ù Ø¨Ø§Ø³Ù… <b>${fileName}.txt</b> ÙÙŠ Ù…Ø³ØªÙˆØ¯Ø¹Ùƒ</p>
                    <button onclick="window.location.href='index.html'" class="tool-btn">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…ÙƒØªØ¨Ø©</button>
                </div>`;
            }
        }

        function toggleMode(mode) { document.body.className = mode + '-mode'; }
        
        let currentSize = 1.3;
        function changeSize(delta) {
            currentSize += delta;
            if(currentSize < 0.8) currentSize = 0.8;
            if(currentSize > 2.5) currentSize = 2.5;
            document.body.style.setProperty('--font-size', currentSize + 'rem');
        }

        window.onload = loadNovel;
    </script>

            try {
                const response = await fetch(fileName + '.txt');
                const text = await response.text();
                document.getElementById('contentHolder').innerText = text;
            } catch (err) {
                document.getElementById('contentHolder').innerText = "Ø¹Ø°Ø±Ø§Ù‹ØŒ ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ù†Øµ Ø§Ù„Ø±ÙˆØ§ÙŠØ©.";
            }
        }

        function toggleMode(mode) { document.body.className = mode + '-mode'; }
        
        let currentSize = 1.3;
        function changeSize(delta) {
            currentSize += delta;
            document.body.style.setProperty('--font-size', currentSize + 'rem');
        }

        window.onload = loadNovel;
    </script>
</body>
</html>
