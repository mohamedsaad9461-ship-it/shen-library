<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ø´ÙŠÙ† PRO</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cairo:wght@700&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #f4f1ea; --text: #2c3e50; --size: 1.3rem; }
        body.dark { --bg: #1a1a1b; --text: #d5d5d5; }
        body { margin: 0; background: var(--bg); color: var(--text); font-family: 'Amiri', serif; overflow: hidden; }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ */
        .reader-header { 
            height: 60px; background: rgba(0,0,0,0.05); backdrop-filter: blur(15px);
            display: flex; align-items: center; justify-content: space-around;
            position: fixed; top: 0; width: 100%; z-index: 1000; border-bottom: 1px solid rgba(0,0,0,0.1);
        }
        .icon-btn { cursor: pointer; border: 1px solid #ccc; padding: 5px 12px; border-radius: 10px; background: white; font-family: 'Cairo'; font-size: 12px; }
        .marker-tool { background: #ffeb3b !important; font-weight: bold; }

        /* Ø­Ø§ÙˆÙŠØ© Ø§Ù„ØµÙØ­Ø§Øª */
        #main-viewer { 
            margin-top: 60px; height: calc(100vh - 100px); width: 100vw; 
            display: flex; transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .page-box { 
            min-width: 100vw; box-sizing: border-box; padding: 30px 10%; 
            text-align: justify; font-size: var(--size); line-height: 2.2; 
        }

        /* Ø§Ù„Ù…Ø§Ø±ÙƒØ± */
        .highlight { background-color: #ffeb3b; color: #000; border-radius: 4px; }

        /* Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø³ÙÙ„ÙŠ */
        .reader-footer { 
            position: fixed; bottom: 0; width: 100%; height: 40px; 
            background: rgba(0,0,0,0.02); display: flex; align-items: center; 
            justify-content: center; font-family: 'Cairo'; font-size: 13px; 
        }
    </style>
</head>
<body class="light">

    <div class="reader-header">
        <div class="icon-btn" onclick="location.href='index.html'">ğŸ  Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</div>
        <div class="icon-btn marker-tool" onclick="activateMarker()">ğŸ–ï¸ Ù…Ø§Ø±ÙƒØ±</div>
        <div class="icon-btn" onclick="toggleDarkMode()">ğŸŒ™</div>
        <div class="icon-btn" onclick="changeSize(0.1)">A+</div>
    </div>

    <div id="main-viewer">
        </div>

    <div class="reader-footer">
        <span id="page-nav">ØµÙØ­Ø© 1 Ù…Ù† ...</span>
    </div>

    <script>
        // Ù†Øµ ØªØ¬Ø±ÙŠØ¨ÙŠ Ø¶Ø®Ù… Ù„Ù„ØªØ£ÙƒØ¯ Ø¥Ù† Ø§Ù„ØªÙ‚Ù„ÙŠØ¨ Ø´ØºØ§Ù„ (Ù‡ÙŠØªÙ… Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ù…Ù„ÙÙƒ)
        const demoText = "Ù‡Ø°Ø§ Ù†Øµ ØªØ¬Ø±ÙŠØ¨ÙŠ Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ù…Ù„ Ù†Ø¸Ø§Ù… Ø§Ù„ØµÙØ­Ø§Øª ÙÙŠ Ù…ÙƒØªØ¨Ø© Ø´ÙŠÙ†. ".repeat(500);
        
        let currentPage = 0;
        let totalPages = 0;

        function buildPages(content) {
            const viewer = document.getElementById('main-viewer');
            viewer.innerHTML = "";
            // ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ù†Øµ Ù„ØµÙØ­Ø§Øª (ÙƒÙ„ 200 ÙƒÙ„Ù…Ø© ØµÙØ­Ø©)
            const words = content.split(' ');
            for(let i=0; i<words.length; i+=200) {
                const pageText = words.slice(i, i+200).join(' ');
                const div = document.createElement('div');
                div.className = 'page-box';
                div.innerHTML = `<p>${pageText}</p>`;
                viewer.appendChild(div);
            }
            totalPages = document.querySelectorAll('.page-box').length;
            updateDisplay();
        }

        function updateDisplay() {
            const viewer = document.getElementById('main-viewer');
            viewer.style.transform = `translateX(${currentPage * 100}vw)`;
            document.getElementById('page-nav').innerText = `ØµÙØ­Ø© ${currentPage + 1} Ù…Ù† ${totalPages}`;
            // Ø­ÙØ¸ Ø§Ù„ØµÙØ­Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
            localStorage.setItem('last_page', currentPage);
        }

        // Ø¥ÙŠÙ…Ø§Ø¡Ø§Øª Ø§Ù„ØªÙ‚Ù„ÙŠØ¨
        let startX = 0;
        document.addEventListener('touchstart', e => startX = e.touches[0].clientX);
        document.addEventListener('touchend', e => {
            let diff = startX - e.changedTouches[0].clientX;
            if(Math.abs(diff) > 60) {
                if(diff > 0 && currentPage < totalPages - 1) currentPage++;
                else if(diff < 0 && currentPage > 0) currentPage--;
                updateDisplay();
            }
        });

        function toggleDarkMode() { document.body.classList.toggle('dark'); }
        function activateMarker() { alert("ØªÙ… ØªÙØ¹ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø§Ø±ÙƒØ±: ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† ØªØ­Ø¯ÙŠØ¯ Ø£ÙŠ Ù†Øµ Ø¨Ø§Ù„Ù„Ù…Ø³."); }
        
        // Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ù„ÙŠ ÙˆÙ‚Ù Ø¹Ù†Ø¯Ù‡Ø§
        window.onload = () => {
            const saved = localStorage.getItem('last_page');
            if(saved) currentPage = parseInt(saved);
            buildPages(demoText); // Ù‡Ù†ØºÙŠØ± demoText Ø¨Ù…Ù„ÙÙƒ Ø§Ù„Ù†ØµÙŠ Ø­Ø§Ù„Ø§Ù‹
        };
    </script>
</body>
</html>
