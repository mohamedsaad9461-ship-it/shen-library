<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù‚Ø§Ø±Ø¦ Ø´ÙŠÙ† Ø§Ù„Ø°ÙƒÙŠ - Ø­Ù„Ù… Ø·Ù†Ø¬Ø§Ø±</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cairo:wght@600&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #f4f1ea; --text: #2c3e50; --size: 1.35rem; --h-color: #ffeb3b88; }
        body.dark { --bg: #1a1a1b; --text: #d5d5d5; }
        body { margin: 0; background: var(--bg); color: var(--text); font-family: 'Amiri', serif; overflow: hidden; transition: 0.3s; }

        .header { height: 60px; display: flex; align-items: center; justify-content: space-between; padding: 0 15px; background: rgba(0,0,0,0.03); backdrop-filter: blur(10px); position: fixed; top: 0; width: 100%; z-index: 1000; box-sizing: border-box; }
        .icon-btn { cursor: pointer; font-size: 1.3rem; background: none; border: none; color: var(--text); position: relative; }

        /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø³Ø±ÙŠØ© Ù„Ù„Ù…Ø§Ø±ÙƒØ± */
        .marker-palette { display: none; position: absolute; top: 65px; background: white; border-radius: 20px; padding: 5px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); flex-direction: column; gap: 8px; z-index: 1001; }
        .color-dot { width: 25px; height: 25px; border-radius: 50%; cursor: pointer; border: 2px solid white; box-shadow: 0 0 5px rgba(0,0,0,0.1); }

        #viewport { margin-top: 60px; height: calc(100vh - 100px); width: 100vw; display: flex; transition: transform 0.4s ease-out; }
        .page-box { min-width: 100vw; box-sizing: border-box; padding: 25px 10%; text-align: justify; font-size: var(--size); line-height: 2.2; }
        
        /* Ø§Ù„ØªØ¸Ù„ÙŠÙ„ Ø§Ù„Ù…Ù„ÙˆÙ† */
        ::selection { background: var(--h-color); }
        .highlight-yellow { background: #ffeb3b88; }
        .highlight-red { background: #ff525288; }
        .highlight-blue { background: #448aff88; }

        .side-nav { position: fixed; top: 60px; height: calc(100vh - 100px); width: 45px; display: flex; align-items: center; justify-content: center; background: rgba(0,0,0,0.01); cursor: pointer; z-index: 500; font-size: 1.8rem; opacity: 0.2; }
        .footer { position: fixed; bottom: 0; width: 100%; height: 40px; display: flex; align-items: center; justify-content: center; background: rgba(0,0,0,0.02); font-family: 'Cairo'; font-size: 13px; }
    </style>
</head>
<body class="sepia-mode">

    <div class="header">
        <button class="icon-btn" onclick="location.href='index.html'">âœ•</button>
        <div style="display:flex; gap:20px; align-items:center;">
            <div style="position:relative;">
                <button class="icon-btn" onclick="togglePalette()">ğŸ–ï¸</button>
                <div id="palette" class="marker-palette">
                    <div class="color-dot" style="background:#ffeb3b" onclick="setMarker('#ffeb3b88')"></div>
                    <div class="color-dot" style="background:#ff5252" onclick="setMarker('#ff525288')"></div>
                    <div class="color-dot" style="background:#448aff" onclick="setMarker('#448aff88')"></div>
                </div>
            </div>
            <button class="icon-btn" onclick="document.body.classList.toggle('dark')">ğŸŒ™</button>
            <button class="icon-btn" onclick="adj(0.1)">A+</button>
            <button class="icon-btn" onclick="adj(-0.1)">A-</button>
        </div>
    </div>

    <div class="side-nav" style="left:0" onclick="move(1)">â®</div>
    <div class="side-nav" style="right:0" onclick="move(-1)">â¯</div>

    <div id="viewport"> <div class="page-box">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø­Ù„Ù… Ø·Ù†Ø¬Ø§Ø±...</div> </div>

    <div class="footer"> <span id="pg">1 / ...</span> </div>

    <script>
        let cur = 0, total = 0, bID = "tangar";

        // Ø§Ù„Ø±Ø¨Ø· Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ø¨Ù…Ù„Ù Ø§Ù„Ù€ txt
        async function load() {
            try {
                const res = await fetch('tangar.txt');
                const text = await res.text();
                build(text);
            } catch(e) { document.getElementById('viewport').innerText = "ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù…Ù„Ù tangar.txt"; }
        }

        function build(txt) {
            const v = document.getElementById('viewport'); v.innerHTML = "";
            const words = txt.split(/\s+/);
            for(let i=0; i<words.length; i+=220) {
                const div = document.createElement('div');
                div.className = 'page-box';
                div.innerHTML = `<p>${words.slice(i, i+220).join(' ')}</p>`;
                v.appendChild(div);
            }
            total = document.querySelectorAll('.page-box').length;
            const s = localStorage.getItem('last_'+bID);
            if(s) cur = parseInt(s);
            update();
        }

        function move(d) {
            if(d===1 && cur < total-1) cur++; else if(d===-1 && cur > 0) cur--;
            update();
        }

        function update() {
            document.getElementById('viewport').style.transform = `translateX(${cur * 100}vw)`;
            document.getElementById('pg').innerText = `${cur + 1} / ${total}`;
            localStorage.setItem('last_'+bID, cur);
        }

        function togglePalette() {
            const p = document.getElementById('palette');
            p.style.display = (p.style.display === 'flex') ? 'none' : 'flex';
        }

        function setMarker(color) {
            document.documentElement.style.setProperty('--h-color', color);
            togglePalette();
            alert("ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù„ÙˆÙ†! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù†Øµ Ø¨ØµØ¨Ø§Ø¹Ùƒ.");
        }

        function adj(s) { /* Ø¯Ø§Ù„Ø© Ø§Ù„Ø®Ø· */ }

        // Ø¯Ø¹Ù… Ø§Ù„Ø³Ø­Ø¨ Ø¨Ø§Ù„Ù„Ù…Ø³
        let sX = 0;
        document.addEventListener('touchstart', e => sX = e.touches[0].clientX);
        document.addEventListener('touchend', e => {
            let dX = sX - e.changedTouches[0].clientX;
            if(Math.abs(dX) > 60) move(dX > 0 ? 1 : -1);
        });

        window.onload = load;
    </script>
</body>
</html>
