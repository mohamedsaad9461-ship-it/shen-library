<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù‚Ø§Ø±Ø¦ Ø´ÙŠÙ† Ø§Ù„Ø°ÙƒÙŠ</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cairo:wght@400&display=swap" rel="stylesheet">
    <style>
        :root { --bg-color: #f4f1ea; --text-color: #2c3e50; --font-size: 1.3rem; }
        body { margin: 0; padding: 0; background-color: var(--bg-color); color: var(--text-color); transition: 0.3s; font-family: 'Amiri', serif; line-height: 2; overflow-x: hidden; }
        
        .reader-tools { position: sticky; top: 0; background: rgba(255,255,255,0.95); backdrop-filter: blur(10px); display: flex; justify-content: space-around; padding: 12px; border-bottom: 1px solid #ddd; z-index: 1000; }
        .tool-btn { cursor: pointer; border: 1px solid #ccc; padding: 5px 12px; border-radius: 20px; font-family: 'Cairo'; font-size: 12px; background: white; }

        /* Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© (Ø§Ù„ØªÙ‚Ù„ÙŠØ¨ Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ) */
        #contentHolder {
            column-width: 100vw;
            column-gap: 40px;
            height: 80vh;
            padding: 20px 5vw;
            box-sizing: border-box;
            text-align: justify;
            transition: transform 0.5s ease-in-out;
        }

        .dark-mode { --bg-color: #121212; --text-color: #d1d1d1; }
        .sepia-mode { --bg-color: #f4f1ea; --text-color: #433422; }
    </style>
</head>
<body class="sepia-mode">

    <div class="reader-tools">
        <div class="tool-btn" onclick="toggleMode('dark')">ğŸŒ™ Ù„ÙŠÙ„ÙŠ</div>
        <div class="tool-btn" onclick="toggleMode('sepia')">ğŸ“œ ÙˆØ±Ù‚ÙŠ</div>
        <div class="tool-btn" onclick="changeSize(0.1)">A+</div>
        <div class="tool-btn" onclick="changeSize(-0.1)">A-</div>
    </div>

    <div id="contentHolder">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±ÙˆØ§ÙŠØ©...</div>

    <script>
        // Ø¯Ø§Ù„Ø© Ø³Ø­Ø¨ Ø§Ù„Ù†Øµ Ù…Ù† Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ
        async function loadNovel() {
            const urlParams = new URLSearchParams(window.location.search);
            const fileName = urlParams.get('book'); // Ø¨ÙŠØ§Ø®Ø¯ Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø·
            
            if (!fileName) {
                document.getElementById('contentHolder').innerText = "Ø®Ø·Ø£: Ù„Ù… ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø±ÙˆØ§ÙŠØ©.";
                return;
            }

            try {
                const response = await fetch(fileName + '.txt');
                const text = await response.text();
                document.getElementById('contentHolder').innerText = text;
            } catch (err) {
                document.getElementById('contentHolder').innerText = "Ø¹Ø°Ø±Ø§Ù‹ØŒ ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ù†Øµ Ø§Ù„Ø±ÙˆØ§ÙŠØ©.";
            }
        }

        function toggleMode(mode) { document.body.className = mode + '-mode'; }
        
        let currentSize = 1.3;
        function changeSize(delta) {
            currentSize += delta;
            document.body.style.setProperty('--font-size', currentSize + 'rem');
        }

        window.onload = loadNovel;
    </script>
</body>
</html>
