<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Almarai:wght@700;800&family=Cairo:wght@600&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* 1. Ø§Ù„Ø«ÙˆØ§Ø¨Øª ÙˆØ§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„Ø¨ØµØ±ÙŠØ© Ø§Ù„Ø£ØµÙ„ÙŠØ© (Ù…Ù…Ù†ÙˆØ¹ Ø§Ù„Ù„Ù…Ø³) */
        body { margin: 0; padding: 0; overflow-x: hidden; background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab); background-size: 400% 400%; animation: gradientBG 15s ease infinite; font-family: 'Cairo', sans-serif; transition: 0.3s; }
        @keyframes gradientBG { 0%, 100% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } }

        /* 2. Ø§Ù„Ø¨Ø§Ù†Ø± ÙˆØ§Ù„Ù‚Ø§Ø¦Ù…Ø© */
        .slider-container { width: 92%; margin: 20px auto; height: 170px; border-radius: 25px; overflow: hidden; border: 2px solid rgba(255,255,255,0.4); }
        .slides { display: flex; width: 900%; height: 100%; animation: slideAction 36s infinite ease-in-out; }
        .slide { width: 11.11%; background-size: cover; background-position: center; }
        @keyframes slideAction { 0%, 9% { transform: translateX(0%); } 11%, 20% { transform: translateX(11.11%); } 22%, 31% { transform: translateX(22.22%); } 33%, 42% { transform: translateX(33.33%); } 44%, 53% { transform: translateX(44.44%); } 55%, 64% { transform: translateX(55.55%); } 66%, 75% { transform: translateX(66.66%); } 77%, 86% { transform: translateX(77.77%); } 88%, 100% { transform: translateX(88.88%); } }
        .menu-container { padding: 10px 20px; display: flex; flex-direction: column; gap: 15px; }
        .glass-btn { background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(12px); border: 2px solid rgba(255, 255, 255, 0.4); color: white; padding: 18px; border-radius: 20px; text-align: center; font-weight: 800; cursor: pointer; transition: 0.3s; }
        .glass-btn:active { transform: scale(0.95); }

        /* 3. Ø§Ù„ØªÙ†Ù‚Ù„ ÙˆØ§Ù„ÙƒØ±ÙˆØª */
        #librarySection, #quotesSection, #readerMode { display: none; }
        .top-bar { display: flex; align-items: center; padding: 12px 15px; gap: 10px; background: rgba(255,255,255,0.2); backdrop-filter: blur(10px); position: sticky; top: 0; z-index: 1000; }
        .back-circle { width: 35px; height: 35px; background: rgba(255,255,255,0.3); border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; color: white; border: 1px solid rgba(255,255,255,0.4); }
        .novel-card { background: rgba(255,255,255,0.2); margin: 15px; padding: 15px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.3); position: relative; }
        
        /* 4. Ø§Ù„Ù‚Ø§Ø±Ø¦ Ø§Ù„Ù…Ø·ÙˆØ± (ØªÙ†Ø³ÙŠÙ‚Ø§ØªÙƒ Ø§Ù„Ø£ØµÙ„ÙŠØ©) */
        #readerMode { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 2000; overflow-y: auto; transition: background 0.3s; }
        .reader-toolbar { position: sticky; top: 60px; background: rgba(0,0,0,0.05); display: flex; justify-content: center; gap: 15px; padding: 10px; backdrop-filter: blur(5px); z-index: 1001; }
        .tool-btn { background: white; border: 1px solid #ddd; padding: 5px 12px; border-radius: 10px; cursor: pointer; font-size: 14px; font-weight: bold; }
        .reader-content { padding: 40px 25px; font-family: 'Amiri', serif; line-height: 2.2; font-size: 22px; max-width: 800px; margin: 0 auto; text-align: justify; }
        
        /* Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ù‚Ø§Ø±Ø¦ */
        .mode-light { background: #fdf6e3; color: #333; }
        .mode-sepia { background: #f4ecd8; color: #5b4636; }
        .mode-dark { background: #1a1a1a; color: #ccc; }

        .read-btn { display: block; margin-top: 12px; padding: 12px; border-radius: 15px; text-align: center; font-weight: 800; cursor: pointer; transition: 0.3s; }
        .btn-active { background: #FFD700; color: #333; }
        .btn-soon { background: rgba(255,255,255,0.1); color: #ccc; cursor: not-allowed; border: 1px dashed #ccc; }
        
        /* Ø§Ù„Ø§Ù‚ØªØ¨Ø§Ø³Ø§Øª */
        .quote-card { background: rgba(255,255,255,0.2); backdrop-filter: blur(20px); border-radius: 30px; padding: 40px 30px 30px; border: 2px solid #fff; position: relative; text-align: center; margin: 50px 20px; }
        .author-img { width: 75px; height: 75px; border-radius: 50%; border: 3px solid #FFD700; position: absolute; top: -40px; right: 20px; background: #eee; background-image: url('https://i.ibb.co/LDRb8d64/Screenshot-2026-01-27-164026.png'); background-size: cover; }
        .badge { position: absolute; top: -2px; right: -2px; width: 10px; height: 10px; background: red; border-radius: 50%; display: none; }
    </style>
</head>
<body onload="loadUserData()">

  <div id="homeUI">
    <div class="slider-container"><div class="slides">
      <div class="slide" style="background-image: url('https://i.ibb.co/LDRb8d64/Screenshot-2026-01-27-164026.png');"></div>
      <div class="slide" style="background-image: url('https://i.ibb.co/9mntZww9/Screenshot-2026-01-28-012416.png');"></div>
      <div class="slide" style="background-image: url('https://i.ibb.co/tpjZ8bkf/Screenshot-2026-01-28-012315.png');"></div>
      <div class="slide" style="background-image: url('https://i.ibb.co/5xnfF4MH/Screenshot-2026-01-28-012305.png');"></div>
      <div class="slide" style="background-image: url('https://i.ibb.co/jk7DKz9j/Screenshot-2026-01-28-012217.png');"></div>
      <div class="slide" style="background-image: url('https://i.ibb.co/zWbYQ1p3/Screenshot-2026-01-28-012201.png');"></div>
      <div class="slide" style="background-image: url('https://i.ibb.co/S424GfVR/Screenshot-2026-01-28-012150.png');"></div>
      <div class="slide" style="background-image: url('https://i.ibb.co/LzCtC41s/Screenshot-2026-01-28-012142.png');"></div>
      <div class="slide" style="background-image: url('https://i.ibb.co/5WCsTrMn/Screenshot-2026-01-28-012120.png');"></div>
    </div></div>
    <div class="menu-container">
      <div class="glass-btn" onclick="showSec('librarySection')">âœ¨ ØªØ§Ø¨Ø¹ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„Ù…ÙƒØªØ¨Ø©</div>
      <div class="glass-btn" onclick="showSec('quotesSection')">ğŸ–‹ï¸ Ø§Ù‚ØªØ¨Ø§Ø³Ø§Øª Ø£Ø¯Ø¨ÙŠØ©</div>
      <div class="glass-btn">ğŸ’¡ Ù…Ø¹Ù„ÙˆÙ…Ø© Ù…Ù† Ø±ÙˆØ§ÙŠØ©</div>
      <div class="glass-btn">ğŸ“– Ù…Ù† Ù†Ø­Ù† / ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</div>
    </div>
  </div>

  <div id="librarySection">
    <div class="top-bar">
      <div class="back-circle" onclick="showSec('homeUI')">â”</div>
      <div style="flex-grow:1; background:rgba(255,255,255,0.15); border-radius:12px; padding:8px;"><input type="text" id="novelSearch" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø±ÙˆØ§ÙŠØªÙƒ..." onkeyup="liveSearch()" style="background:none; border:none; width:100%; color:white; outline:none;"></div>
      <div style="position:relative; font-size:22px;">ğŸ””<div class="badge" id="bellBadge"></div></div>
    </div>
    <div id="novelsContainer"></div>
  </div>

  <div id="readerMode" class="mode-light">
    <div class="top-bar" style="background:#fff; color:#333;">
      <div class="back-circle" onclick="closeReader()" style="color:#333; border-color:#333;">â”</div>
      <div id="readerTitle" style="font-weight:bold; flex-grow:1; text-align:center;"></div>
      <div id="scrollProgress" style="font-size:12px; font-weight:bold;">0%</div>
    </div>
    
    <div class="reader-toolbar">
        <button class="tool-btn" onclick="changeFontSize(1)">A+</button>
        <button class="tool-btn" onclick="changeFontSize(-1)">A-</button>
        <button class="tool-btn" onclick="setReaderMode('mode-light')" style="background:#fdf6e3;">â˜€ï¸</button>
        <button class="tool-btn" onclick="setReaderMode('mode-sepia')" style="background:#f4ecd8;">ğŸ“–</button>
        <button class="tool-btn" onclick="setReaderMode('mode-dark')" style="background:#1a1a1a; color:white;">ğŸŒ™</button>
    </div>

    <div id="readerText" class="reader-content">
        <iframe id="externalBookFrame" src="" style="width:100%; height:80vh; border:none; display:none;"></iframe>
        <div id="internalText"></div>
    </div>
  </div>

  <div id="quotesSection">
    <div class="top-bar"><div class="back-circle" onclick="showSec('homeUI')">â”</div></div>
    <div class="quote-card">
      <div class="author-img"></div>
      <div class="quote-text">" Ù‡Ù†Ø§ÙƒØŒ ÙŠÙÙ†Ø³Ø¬ Ù„Ùƒ Ø«ÙˆØ¨ Ø£Ù…Ù†ÙŠØ§ØªÙƒ ØŒ ØªÙ…Ø§Ù…Ø§Ù‹ ÙƒÙ…Ø§ ØªÙ…Ù†ÙŠØªÙ‡ ØŒ Ù…Ù„Ø§Ø¦Ù…Ø§Ù‹ Ù„Ø¬Ø³Ø¯Ùƒ ØŒ Ù…ØªÙ‰ Ø³Ù‚Ø· Ù…Ù† Ø§Ù„Ø³Ù…Ø§Ø¡ Ø§Ø±ØªØ¯ÙŠÙ‡ Ø«Ù… ØªÙ†Ù‡Ø¯ ÙˆÙ‚Ù„ Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡ Ø§Ù„Ø°ÙŠ Ø£Ø­Ø³Ù† Ø¨Ù†Ø§ Ù‚Ø¯Ø±Ù‡ "</div>
      <div style="color:#FFD700; font-size:11px; margin-top:15px; font-weight:bold;">Ø±ÙˆØ§ÙŠØ© Ø±Ø­Ø§Ù† - Ù…Ø­Ù…Ø¯ Ø³Ø¹Ø¯ 2014</div>
    </div>
  </div>

  <script>
    const novelsData = [
      { id: 0, name: "Ø­Ù„Ù… Ø·Ù†Ø¬Ø§Ø±", author: "Ù…Ø­Ù…Ø¯ ÙÙƒØ±ÙŠ", img: "https://i.ibb.co/G497YVXL/Screenshot-2026-01-28-014231.png", available: true, file: "tangar.html" },
      { id: 1, name: "Ù‚Ù„Ø¨ Ø§Ù„ØªÙŠÙ†", author: "Ù„ÙŠÙ„Ù‰ Ø§Ù„ÙØ§ÙˆÙŠ", img: "https://i.ibb.co/v97Ghgy/Screenshot-2026-01-28-043103.png", available: false },
      { id: 2, name: "Ù…Ù…Ø§Ù„Ùƒ Ø§Ù„Ù‚ÙŠØ±Ø§Ù†", author: "Ù…Ø­Ù…Ø¯ ÙÙƒØ±ÙŠ", img: "https://i.ibb.co/MyXwc6TT/Screenshot-2026-01-28-014536.png", available: false },
      { id: 3, name: "ÙˆØ¨Ø§Ø¡", author: "Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¹Ù„ÙŠÙ…ÙŠ", img: "https://i.ibb.co/xqfBbZjf/Screenshot-2026-01-28-014331.png", available: false },
      { id: 4, name: "Ù‚ØµØµ Ù…Ù† Ù…ØµØ¯Ø±", author: "Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¹Ù„ÙŠÙ…ÙŠ", img: "https://i.ibb.co/BHgP5YC6/Screenshot-2026-01-28-014426.png", available: false }
    ];

    let userData = { votes: {}, ratings: {}, lastScroll: 0 };
    let currentFontSize = 22;

    function loadUserData() {
        const saved = localStorage.getItem('mohamed_reader_data');
        if(saved) userData = JSON.parse(saved);
        renderNovels();
    }

    function saveUserData() {
        localStorage.setItem('mohamed_reader_data', JSON.stringify(userData));
    }

    function renderNovels() {
        const container = document.getElementById('novelsContainer');
        container.innerHTML = '';
        novelsData.forEach((novel) => {
            const vote = userData.votes[novel.id] || null;
            const rating = userData.ratings[novel.id] || 0;
            const stars = "â­".repeat(rating) + "â˜†".repeat(5-rating);

            container.innerHTML += `
                <div class="novel-card" data-name="${novel.name}">
                <div style="display:flex; gap:15px; align-items:center;">
                    <img src="${novel.img}" width="80" style="border-radius:12px; box-shadow: 0 5px 10px rgba(0,0,0,0.2);">
                    <div style="flex:1">
                    <div style="font-weight:800; color:#fff; font-size:18px;">${novel.name}</div>
                    <div style="color:#FFD700">${stars}</div>
                    </div>
                </div>
                <div class="read-btn ${novel.available ? 'btn-active' : 'btn-soon'}" onclick="${novel.available ? `openReader('${novel.name}', '${novel.file}')` : ''}">
                    ${novel.available ? 'ğŸ“– Ø§Ù‚Ø±Ø£ Ø§Ù„Ø¢Ù†' : 'â³ ÙŠØªÙˆÙØ± Ù‚Ø±ÙŠØ¨Ø§Ù‹'}
                </div>
                </div>
            `;
        });
    }

    function openReader(name, fileName) {
        document.getElementById('readerMode').style.display = 'block';
        document.getElementById('readerTitle').innerText = name;
        const iframe =
